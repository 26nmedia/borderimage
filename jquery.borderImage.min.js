(function(C){C.fn.borderImage=function(K){if(!C.fn.borderImage.initialized){if(document.defaultView&&document.defaultView.getComputedStyle){var L=document.defaultView.getComputedStyle(document.body,"");if(typeof (document.body.style["-webkitBorderImage"])=="string"){C.browser.support.borderImage=true;C.fn.borderImage.prefix="-webkit"}else{if(L.getPropertyValue("-moz-border-image")!==""){C.browser.support.borderImage=true;C.fn.borderImage.prefix="-moz"}}}if(!C.browser.support.borderImage&&document.createElement("canvas").getContext){C.browser.support.canvas=true;C.fn.borderImage.bicanvas=document.createElement("canvas")}C.fn.borderImage.initialized=true}if(C.browser.support.borderImage){return(arguments[1]&&arguments[1].constructor==String)?C(this):C(this).css(C.fn.borderImage.prefix+"BorderImage",K).css("backgroundColor","transparent")}var M=/url\(\s*"(.*?)"\s*\)\s*(\d+)(%)?\s*(\d*)(%)?\s*(\d*)(%)?\s*(\d*)(%)?/.exec(K);if(M&&(C.browser.support.canvas||C.browser.support.vml)){arguments[0]=M[1];var I=this,J=document.createDocumentFragment().appendChild(document.createElement("div")),G=arguments.length,E=arguments[G-1].constructor==Number?arguments[G-1]:C.fn.borderImage.defaults.resolution;for(var H=0;H<G&&arguments[H].constructor==String;++H){var F=document.createElement("img");F.src=arguments[H];J.appendChild(F.cloneNode(true))}J.style.position="absolute";J.style.visibility="hidden";C("body").prepend(J);var D=C("img:first",J).load(function(){var h=D.height(),U=D.width(),j=parseInt(M[2])*(M[3]?h/100:1),f=M[4]?parseInt(M[4])*(M[5]?U/100:1):j,k=M[6]?parseInt(M[6])*(M[7]?h/100:1):j,a=M[8]?parseInt(M[8])*(M[9]?U/100:1):f,W=h-j-k,g=U-a-f,e=J.getElementsByTagName("img"),i=C.fn.borderImage.bicanvas,c=B(0,0,a,j,e,h,U,i,E),b=B(a,0,g,j,e,h,U,i,E),Z=B(a+g,0,f,j,e,h,U,i,E),Y=B(0,j,a,W,e,h,U,i,E),X=B(a,j,g,W,e,h,U,i,E),V=B(a+g,j,f,W,e,h,U,i,E),T=B(0,j+W,a,k,e,h,U,i,E),S=B(a,j+W,g,k,e,h,U,i,E),R=B(a+g,j+W,f,k,e,h,U,i,E),d,P,Q,N,O;I.each(function(n,o){var q=C(o),s={position:"relative",borderColor:"transparent",padding:0},m=document.createElement("div"),p=true,r=q.css("display");if(r=="inline"){s.display="inline-block"}else{if(((C.browser.msie&&C.browser.version==7)||(document.documentMode&&document.documentMode==7))&&q.css("display")=="inline-block"){s.display="inline"}}if(q.css("position")=="absolute"){do{if(C.curCSS(o,"position")=="relative"){s.position="absolute";break}}while(o=o.parentNode)}m.style.paddingTop=q.css("paddingTop");m.style.paddingLeft=q.css("paddingLeft");m.style.paddingBottom=q.css("paddingBottom");m.style.paddingRight=q.css("paddingRight");m.style.position="relative";m.className="biWrapper";q.css(s).wrapInner(m);if(d!=q.css("borderTopWidth")){d=q.css("borderTopWidth");p=false}if(Q!=q.css("borderBottomWidth")){Q=q.css("borderBottomWidth");p=false}if(P!=q.css("borderRightWidth")){P=q.css("borderRightWidth");p=false}if(N!=q.css("borderLeftWidth")){N=q.css("borderLeftWidth");p=false}if(!p){var l=document.createDocumentFragment();A({top:"-"+d,left:"-"+N,height:d,width:N},c,l);A({top:"-"+d,left:0,width:"100%",height:d},b,l);A({top:"-"+d,right:"-"+P,height:d,width:P},Z,l);A({top:0,bottom:0,left:"-"+N,width:N,height:"100%"},Y,l);A({left:0,top:0,right:0,bottom:0,height:"100%",width:"100%"},X,l);A({top:0,bottom:0,right:"-"+P,width:P,height:"100%"},V,l);A({bottom:"-"+Q,left:"-"+N,width:N,height:Q},T,l);A({bottom:"-"+Q,left:0,width:"100%",height:Q},S,l);A({bottom:"-"+Q,right:"-"+P,height:Q,width:P},R,l);O=l}q.prepend(O.cloneNode(true))})});if(C.browser.support.vml){C("body")[0].appendChild(document.createElement("biv:image"))}}return C(this)};if(!C.browser.support){C.browser.support={}}if(document.namespaces&&!document.namespaces.biv){document.namespaces.add("biv","urn:schemas-microsoft-com:vml","#default#VML");document.createStyleSheet().addRule("biv\\: *","behavior: url(#default#VML);");C.browser.support.vml=true;C.fn.borderImage.initialized=true}C.fn.borderImage.defaults={resolution:20};function B(M,J,O,H,F,L,K,I,E){var N=document.createDocumentFragment();if(O>0&&H>0){if(C.browser.support.canvas){I.setAttribute("height",E+"px")}for(var G=0;G<F.length;++G){if(C.browser.support.canvas){I.setAttribute("width",E+"px");I.getContext("2d").drawImage(F[G],M,J,O,H,0,0,E,E);var D=document.createElement("img");D.src=I.toDataURL()}else{var D=document.createElement("div");D.insertAdjacentHTML("BeforeEnd",'<biv:image src="'+F[G].src+'" cropleft="'+M/K+'" croptop="'+J/L+'" cropright="'+(K-O-M)/K+'" cropbottom="'+(L-H-J)/L+'" />');D=D.firstChild}D.style.width=D.style.height="100%";D.style.position="absolute";D.style.border="none";D.className="biSlice image"+G;N.appendChild(D)}}return N}function A(G,H,D){if(parseInt(G.width)!=0&&parseInt(G.height)!=0){var F=document.createElement("div");for(var E in G){F.style[E]=G[E]}F.style.position="absolute";F.style.textAlign="left";F.appendChild(H.cloneNode(true));D.appendChild(F)}}C.fn.biResize=function(D,E){return this.each(function(H,I){var G=C(I),F=G.find(".biWrapper");if(F.length){F.css({width:G.css("width"),height:G.css("height")});G.css({width:"auto",height:"auto"});F.animate(D,E)}else{G.animate(D,E)}})}})(jQuery);