(function(A){A.fn.borderImage=function(I){if(!A.fn.borderImage.initialized){if(document.defaultView&&document.defaultView.getComputedStyle){var J=document.defaultView.getComputedStyle(document.body,"");if(typeof (document.body.style["-webkitBorderImage"])=="string"){A.browser.support.borderImage=true;A.fn.borderImage.prefix="-webkit"}else{if(J.getPropertyValue("-moz-border-image")!==""){A.browser.support.borderImage=true;A.fn.borderImage.prefix="-moz"}}}if(!A.browser.support.borderImage&&document.createElement("canvas").getContext){A.browser.support.canvas=true;bicanvas=document.createElement("canvas")}A.fn.borderImage.initialized=true}if(A.browser.support.borderImage){return(arguments[1]&&arguments[1].constructor==String)?A(this):A(this).css(A.fn.borderImage.prefix+"BorderImage",I).css("backgroundColor","transparent")}var K=/url\(\s*"(.*?)"\s*\)\s*(\d+)(%)?\s*(\d*)(%)?\s*(\d*)(%)?\s*(\d*)(%)?/.exec(I);if(K&&(A.browser.support.canvas||A.browser.support.vml)){arguments[0]=K[1];var G=this,H=document.createDocumentFragment().appendChild(document.createElement("div")),E=arguments.length,C=arguments[E-1].constructor==Number?arguments[E-1]:A.fn.borderImage.defaults.resolution;for(var F=0;F<E&&arguments[F].constructor==String;++F){var D=document.createElement("img");D.src=arguments[F];H.appendChild(D.cloneNode(true))}H.style.position="absolute";H.style.visibility="hidden";A("body").prepend(H);var B=A("img:first",H).load(function(){var g=B.height(),S=B.width(),h=parseInt(K[2])*(K[3]?g/100:1),d=K[4]?parseInt(K[4])*(K[5]?S/100:1):h,i=K[6]?parseInt(K[6])*(K[7]?g/100:1):h,Y=K[8]?parseInt(K[8])*(K[9]?S/100:1):d,U=g-h-i,e=S-Y-d,c=H.getElementsByTagName("img"),a=f(0,0,Y,h,c),Z=f(Y,0,e,h,c),X=f(Y+e,0,d,h,c),W=f(0,h,Y,U,c),V=f(Y,h,e,U,c),T=f(Y+e,h,d,U,c),R=f(0,h+U,Y,i,c),Q=f(Y,h+U,e,i,c),P=f(Y+e,h+U,d,i,c),b,N,O,L,M;function f(q,p,j,l,n){var o=document.createDocumentFragment();if(j>0&&l>0){if(A.browser.support.canvas){bicanvas.setAttribute("height",C+"px")}for(var k=0;k<n.length;++k){if(A.browser.support.canvas){bicanvas.setAttribute("width",C+"px");bicanvas.getContext("2d").drawImage(n[k],q,p,j,l,0,0,C,C);var m=document.createElement("img");m.src=bicanvas.toDataURL()}else{var m=document.createElement("div");m.insertAdjacentHTML("BeforeEnd",'<biv:image src="'+n[k].src+'" cropleft="'+q/S+'" croptop="'+p/g+'" cropright="'+(S-j-q)/S+'" cropbottom="'+(g-l-p)/g+'" />');m=m.firstChild}m.style.width=m.style.height="100%";m.style.position="absolute";m.style.border="none";m.className="biSlice image"+k;o.appendChild(m)}}return o}G.each(function(l,m){var p=A(m),q={position:"relative",borderColor:"transparent",background:"none",padding:0},k=document.createElement("div"),o=true;if(p.css("display")=="inline"){q.display="inline-block"}if(p.css("position")=="absolute"){do{if(A.curCSS(m,"position")=="relative"){q.position="absolute";break}}while(m=m.parentNode)}if(A.browser.msie&&parseInt(A.browser.version)<7){q.borderColor="#808180";q.filter="chroma(color=#808180)"}k.style.paddingTop=p.css("paddingTop");k.style.paddingLeft=p.css("paddingLeft");k.style.paddingBottom=p.css("paddingBottom");k.style.paddingRight=p.css("paddingRight");k.style.position="relative";k.className="biWrapper";p.css(q).wrapInner(k);if(b!=p.css("borderTopWidth")){b=p.css("borderTopWidth");o=false}if(O!=p.css("borderBottomWidth")){O=p.css("borderBottomWidth");o=false}if(N!=p.css("borderRightWidth")){N=p.css("borderRightWidth");o=false}if(L!=p.css("borderLeftWidth")){L=p.css("borderLeftWidth");o=false}function n(t,u){if(parseInt(t.width)!=0&&parseInt(t.height)!=0){var s=document.createElement("div");for(var r in t){s.style[r]=t[r]}s.style.position="absolute";s.style.textAlign="left";s.appendChild(u.cloneNode(true));j.appendChild(s)}}if(!o){var j=document.createDocumentFragment();n({top:"-"+b,left:"-"+L,height:b,width:L},a);n({top:"-"+b,left:0,width:"100%",height:b},Z);n({top:"-"+b,right:"-"+N,height:b,width:N},X);n({top:0,bottom:0,left:"-"+L,width:L,height:"100%"},W);n({left:0,top:0,right:0,bottom:0,height:"100%",width:"100%"},V);n({top:0,bottom:0,right:"-"+N,width:N,height:"100%"},T);n({bottom:"-"+O,left:"-"+L,width:L,height:O},R);n({bottom:"-"+O,left:0,width:"100%",height:O},Q);n({bottom:"-"+O,right:"-"+N,height:O,width:N},P);M=j}p.prepend(M.cloneNode(true));if(A.browser.msie&&parseInt(A.browser.version)<7){m.onpropertychange=function(){p.find("div:eq(3), div:eq(4), div:eq(5)").css("height",p.innerHeight())}}})});if(A.browser.support.vml){A("body")[0].appendChild(document.createElement("biv:image"))}}return A(this)};if(!A.browser.support){A.browser.support={}}if(document.namespaces&&!document.namespaces.biv){document.namespaces.add("biv","urn:schemas-microsoft-com:vml","#default#VML");document.createStyleSheet().addRule("biv\\:*","behavior: url(#default#VML);");A.browser.support.vml=true;A.fn.borderImage.initialized=true}A.fn.borderImage.defaults={resolution:20};A.fn.biResize=function(B,C){return this.each(function(F,G){var E=A(G),D=E.find(".biWrapper");if(D.length){D.css({width:E.css("width"),height:E.css("height")});E.css({width:"auto",height:"auto"});D.animate(B,C)}else{E.animate(B,C)}})}})(jQuery);